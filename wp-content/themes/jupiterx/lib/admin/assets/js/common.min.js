"use strict";!function(p,l){window.jupiterx,window.jupiterx=jQuery.extend({},window.jupiterx,{upgrade:function(t){var i=p(l.template("jupiterx-upgrade")({url:t})),e=i.find(".jupiterx-upgrade-step"),a=i.find(".jupiterx-upgrade-api-key"),o=i.find(".jupiterx-upgrade-activate"),n=e.length,r=0;function u(){p(e[r]).toggleClass("active done"),n<=++r?function(){var t=p('        <div class="jupiterx-upgrade-footer">          <span class="jupiterx-upgrade-learn-more">            <i class="jupiterx-icon-external-link-alt"></i>            <a target="_blank" href="https://help.artbees.net/getting-started/jupiter-x-pro">Learn more about Pro features</a>          </span>          <button class="btn btn-primary">Done</button>        </div>      ');t.find("button").click(function(t){t.preventDefault(),window.location=window.location.href.split("#")[0]}),jupiterx_modal({modalCustomClass:"jupiterx-modal-upgrade jupiterx-modal-upgrade-done",title:"Jupiter X is upgraded",text:"Congrats! you have successfully upgraded to Jupiter X Pro. Now you can enjoy working with Jupiter X at its maximum potential.",footerHTML:t,showCloseButton:!1,showCancelButton:!1,closeOnOutsideClick:!1,type:!1,icon:"jupiterx-icon-pro"})}():p(e[r]).addClass("active")}function s(){o.attr("disabled","disabled").append('<span class="jupiterx-spin jupiterx-icon-circle-notch"></span>'),p.ajax({type:"POST",url:l.ajax.settings.url,data:{action:"jupiterx_api",type:"activate",api_key:a.val()},success:function(t){(t.data||{}).status?(a.removeClass("invalid").attr("disabled","disabled"),o.attr("disabled","disabled").find(".jupiterx-icon-circle-notch").remove(),u(),function(){var t=40,e=void 0;i.find(".jupiterx-upgrade-install-progress").prepend(l.template("jupiterx-progress-bar")()),e=setInterval(function(){100<t?clearTimeout(e):(i.find(".progress-bar").css("width",t+"%"),t+=20)},3e3),p.ajax({type:"POST",url:l.ajax.settings.url,data:{action:"jupiterx_api",type:"install_plugins",plugins:["jupiterx-pro"]},success:function(t){(t.data||{}).status&&u()}})}()):(a.addClass("invalid"),o.removeAttr("disabled").find(".jupiterx-icon-circle-notch").remove())}})}i.on("click",".active .jupiterx-upgrade-buy-pro",function(){u()}),i.on("click",".active .jupiterx-upgrade-activate",function(t){t.preventDefault(),s()}),jupiterx_modal({modalCustomClass:"jupiterx-modal-upgrade",title:"Upgrade Jupiter X",text:i,showCancelButton:!1,showConfirmButton:!1,closeOnOutsideClick:!1,type:!1,icon:"jupiterx-icon-pro"})},activateInit:function(){var t=p(l.template("jupiterx-activate")()),i=t.find(".jupiterx-upgrade-api-key"),a=t.find(".jupiterx-upgrade-activate"),o=p('      <div class="jupiterx-upgrade-footer">        <span class="jupiterx-upgrade-learn-more">          <i class="jupiterx-icon-external-link-alt"></i>          <a target="_blank" href="https://help.artbees.net/getting-started/jupiter-x-pro">Learn more about Pro features</a>        </span>        <button class="btn btn-primary">Done</button>      </div>    ');function e(){a.attr("disabled","disabled").append('<span class="jupiterx-spin jupiterx-icon-circle-notch"></span>'),p.ajax({type:"POST",url:l.ajax.settings.url,data:{action:"jupiterx_api",type:"activate",api_key:i.val()},success:function(t){function e(){jupiterx_modal({modalCustomClass:"jupiterx-modal-upgrade jupiterx-modal-upgrade-done",title:"Oops! Registration was unsuccessful.",text:"Your API key could not be verified. There is no such API key or it is used in another site",footerHTML:o,showCloseButton:!1,showCancelButton:!1,closeOnOutsideClick:!1,type:!1,icon:"jupiterx-icon-times"})}(t.data||{}).status?(i.removeClass("invalid").attr("disabled","disabled"),a.attr("disabled","disabled").find(".jupiterx-icon-circle-notch").remove(),p.ajax({type:"POST",url:l.ajax.settings.url,data:{action:"jupiterx_api",type:"install_plugins",plugins:["jupiterx-pro"]},success:function(t){(t.data||{}).status?jupiterx_modal({modalCustomClass:"jupiterx-modal-upgrade jupiterx-modal-upgrade-done",title:"Jupiter X is activated",text:"Congrats! Jupiter X is activated successfully. Now you can enjoy working with Jupiter at its maximum potential.",footerHTML:o,showCloseButton:!1,showCancelButton:!1,closeOnOutsideClick:!1,type:!1,icon:"jupiterx-icon-check"}):e()}})):(i.addClass("invalid"),a.find(".jupiterx-icon-circle-notch").remove(),e())}})}o.find("button").click(function(t){t.preventDefault(),window.location=window.location.href.split("#")[0]}),t.on("click",".jupiterx-upgrade-activate",function(t){t.preventDefault(),e()}),jupiterx_modal({modalCustomClass:"jupiterx-modal-upgrade",title:"Activate Jupiter X",text:t,showCancelButton:!1,showConfirmButton:!1,closeOnOutsideClick:!1,type:!1,icon:"jupiterx-icon-key"})},uninstallPro:function(){var t=p('<button class="btn btn-danger">Delete Jupiter X Pro Plugin</button>');t.on("click",function(t){t.preventDefault(),function(){var t=p("<div></div>"),e="jupiterx-pro/jupiterx-pro.php";t.prepend(l.template("jupiterx-progress-bar")()).find(".progress-bar").css("width","100%"),p.ajax({type:"POST",url:l.ajax.settings.url,data:{action:"jupiterx_api",type:"deactivate_plugins",plugins:[e]},success:function(){l.updates.ajax("delete-plugin",{plugin:e,slug:"jupiterx-pro",success:function(){var t=p('                  <div class="jupiterx-upgrade-footer">                    <span class="jupiterx-upgrade-learn-more"></span>                    <button class="btn btn-primary">Done</button>                  </div>                ');t.find("button").click(function(t){t.preventDefault(),window.location.reload(!0)}),jupiterx_modal({modalCustomClass:"jupiterx-modal-upgrade",title:"Plugin removed",text:"You have successfully removed Jupiter X Pro plugin.",footerHTML:t,showCloseButton:!1,showCancelButton:!1,closeOnOutsideClick:!1,type:"success"})}})}}),jupiterx_modal({modalCustomClass:"jupiterx-modal-upgrade",title:"Uninstalling Jupiter X Pro Plugin",text:t,showCancelButton:!1,showConfirmButton:!1,closeOnOutsideClick:!1,type:!1})}()}),jupiterx_modal({modalCustomClass:"jupiterx-modal-upgrade jupiterx-modal-uninstall-pro",title:"Important Notice!",text:"Since Jupiter X v1.6.0, you will no longer need Jupiter X Pro plugin to be able to use premium features as we have moved those features to theme itself for a better user experience. Click the button down below to deactivate and delete the plugin from your site.<br><br><small>If the button does not work, please go to <strong>Plugins &gt; Installed Plugins</strong>, deactivate and delete the <strong>Jupiter X Pro</strong> plugin.</small>",showCancelButton:!1,showConfirmButton:!1,closeOnOutsideClick:!1,type:!1,footerHTML:t})}}),p(document).on("click",'.jupiterx-upgrade-modal-trigger, #jupiterx-popup-jupiterx_pro, #tgmpa-plugins a[href*="tgmpa-pro"]',function(t){t.preventDefault(),"undefined"!=typeof jupiterxPremium?jupiterx.activateInit():jupiterx.upgrade(t.target.getAttribute("data-upgrade-link"))})}(jQuery,wp);